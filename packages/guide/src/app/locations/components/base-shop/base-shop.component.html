<app-list-detail-container>
    <ng-container listDetail>
        @if (selectedProcessEntity) {
            <app-shop-item-process-data-details [itemProcessData]="selectedProcessEntity"/>
        }
        @if (selectedEntity) {
            <app-shop-item-data-details [shopItemData]="selectedEntity"/>
        }
        @if (selectedItemUpgrade) {
            <app-item-upgrade-details [itemUpgradeData]="selectedItemUpgrade"/>
        }
    </ng-container>
    <app-card>
        <h1 class="mb-4 font-semibold text-3xl text-black flex items-center gap-x-4 ">
            <app-ui-icon [uiIcon]="SHOP_ICONS[shopName]"/>
            {{ SHOP_DISPLAY_NAMES[shopName] }}
        </h1>
        @if (openingHours$) {

            @if ((openingHours$ |async); as openingHours) {
                <app-opening-hours [openingHours]="openingHours"/>
            }

        }
    </app-card>

    @if (shopItemData$) {

        <h2 class="mt-6 mb-3 font-semibold text-2xl text-white">Stock list</h2>
        @if ((shopItemData$ |async); as shopItemData) {

            <app-data-filter [(showTable)]="showTable"/>
            @if (!showTable) {
                <div class="icon-grid">

                    @for (shopItem of shopItemData; track shopItem) {
                        <app-item-icon (click)="showDetails(shopItem)"
                                       [class.selected-icon]="selectedEntity?.item?.id === shopItem.item.id"
                                       [itemName]="shopItem.item.iconName"
                                       class="icon-grid-item">
                        </app-item-icon>
                    }
                </div>
            }
            @if (showTable) {
                <app-shop-item-data-table [dataSource]="shopItemData"/>
            }


        }

    }

    @if (itemProcessing$) {

        <h2 class="mt-6 mb-3 font-semibold text-2xl text-white">Item processing</h2>
        @if ((itemProcessing$ |async); as shopItemData) {


            <app-data-filter [(showTable)]="showProcessingTable"/>
            @if (!showProcessingTable) {
                <div class="icon-grid">

                    @for (shopItem of shopItemData; track shopItem) {
                        <app-item-icon (click)="showProcessDetails(shopItem)"
                                       [class.selected-icon]="selectedProcessEntity?.input?.id === shopItem.input.id"
                                       [itemName]="shopItem.input.iconName"
                                       class="icon-grid-item">
                        </app-item-icon>
                    }
                </div>
            }
            @if (showProcessingTable) {
                <app-shop-item-process-table [dataSource]="shopItemData"/>
            }


        }

    }

    @if (itemUpgrade$) {

        <h2 class="mt-6 mb-3 font-semibold text-2xl text-white">{{ upgradeHeaderText }}</h2>
        @if ((itemUpgrade$ |async); as shopItemData) {


            <app-data-filter [(showTable)]="showPItemUpgradeTable"/>
            @if (!showPItemUpgradeTable) {
                <div class="icon-grid">

                    @for (shopItem of shopItemData; track shopItem) {
                        <app-item-icon (click)="showItemUpgradeDetails(shopItem)"
                                       [class.selected-icon]="selectedItemUpgrade?.item?.id === shopItem.item.id"
                                       [itemName]="shopItem.item.iconName"
                                       [quality]="shopItem.level"
                                       class="icon-grid-item">
                        </app-item-icon>
                    }
                </div>
            }
            @if (showPItemUpgradeTable) {
                <app-item-upgrade-table [dataSource]="shopItemData"/>
            }

        }

    }

</app-list-detail-container>
