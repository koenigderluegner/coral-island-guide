<app-responsive-table>
    @if (matDataSource) {
        <table [dataSource]="matDataSource" mat-table matSort>
            <ng-container matColumnDef="icon" sticky>
                <td *matCellDef="let element" class="!pl-2 !pr-0 w-10 text-center icon-col " mat-cell>
                    <app-item-icon [itemName]="element.item.iconName"/>
                </td>
            </ng-container>

            <ng-container matColumnDef="displayName">
                <th *matHeaderCellDef [attr.colspan]="2" class="backdrop-blur-xl" mat-header-cell mat-sort-header>Item
                </th>
                <td *matCellDef="let element" class="text-col whitespace-nowrap" mat-cell>
                    {{ element.item.displayName }}
                </td>
            </ng-container>

            <ng-container matColumnDef="shop">
                <th *matHeaderCellDef class="backdrop-blur-xl" mat-header-cell mat-sort-header>Shop
                </th>
                <td *matCellDef="let element" class="text-col whitespace-nowrap" mat-cell>
                    <a [routerLink]="['/locations', element.shop.url]"
                       class="underline">{{ element.shop.displayName }}</a>
                </td>
            </ng-container>

            <ng-container matColumnDef="townRank">
                <th *matHeaderCellDef class="backdrop-blur-xl whitespace-nowrap" mat-header-cell mat-sort-header>Town
                    Rank
                </th>
                <td *matCellDef="let element" class="text-col w-[1%]" mat-cell>
                    {{ element.townRank | townrank }}
                </td>
            </ng-container>

            <ng-container matColumnDef="unlockRequirements">
                <th *matHeaderCellDef class="backdrop-blur-xl whitespace-nowrap" mat-header-cell mat-sort-header>Unlock
                    requirements
                </th>
                <td *matCellDef="let element" class="text-col" mat-cell>
                    <app-table-item-list [itemList]="element.unlockRequirements"></app-table-item-list>

                </td>
            </ng-container>

            <ng-container matColumnDef="requirements">
                <th *matHeaderCellDef class="backdrop-blur-xl whitespace-nowrap" mat-header-cell mat-sort-header>Upgrade
                    requirements
                </th>
                <td *matCellDef="let element" class="text-col" mat-cell>
                    <div class="flex justify-between mb-2">
                        <span>Cost:</span>
                        <app-money [amount]="element.price"/>
                    </div>
                    <app-table-item-list [itemList]="element.requirements"/>
                </td>
            </ng-container>

            <ng-container matColumnDef="daysDelay">
                <th *matHeaderCellDef class="backdrop-blur-xl whitespace-nowrap" mat-header-cell mat-sort-header>Upgrade
                    time
                </th>
                <td *matCellDef="let element" class="text-col" mat-cell>
                    {{ element.daysDelay }} days
                </td>
            </ng-container>

            <ng-container matColumnDef="sellPrice">
                <th *matHeaderCellDef class="backdrop-blur-xl whitespace-nowrap" mat-header-cell mat-sort-header>Sell
                    price
                </th>
                <td *matCellDef="let element" class="text-col !text-right w-[1%]" mat-cell>
                    <app-money [amount]="element.item.sellPrice"/>
                </td>
            </ng-container>

            <tr *matHeaderRowDef="displayHeaderColumns; sticky: true" mat-header-row></tr>
            <tr *matRowDef="let row; columns: displayedColumns;" mat-row></tr>
        </table>
    }
</app-responsive-table>
