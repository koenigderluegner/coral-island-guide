<app-list-detail-container [(openDrawer)]="openDrawer">
    @if (selectedEntity) {
        <app-database-item-details [itemId]="selectedEntity.item.id" context="cooking_recipes" listDetail>
            <ng-template let-details appDatabaseItemDetails>
                @if (details.consumables?.base; as consumable) {
                    <app-consumable [consumable]="consumable"/>
                }
                @for (recipe of details.cookedFrom; track recipe.key) {
                    <app-cooking-recipe class="mb-4" [cookingRecipe]="recipe"/>
                }
            </ng-template>
        </app-database-item-details>
    }


    <mat-tab-group class="w-full" mat-stretch-tabs="false" (selectedTabChange)="updateUrl($event)"
                   [selectedIndex]="selectedTabIndex()">
        @for (utensilName of utensilNames; track utensilName) {
            <mat-tab
                    [label]="cookingUtensilMapping[utensilName.toLowerCase()] ? cookingUtensilMapping[utensilName.toLowerCase()].displayName : utensilName | addSpacesToPascalCase | titlecase">
                <app-data-filter [(showTable)]="showTable"/>
                @if ((filteredData$(utensilName) | async); as processorItems) {

                    @if (!showTable) {
                        <div class="icon-grid">

                            @for (itemProcess of processorItems; track itemProcess) {
                                <app-item-icon (click)="showDetails(itemProcess)"

                                               [amount]="itemProcess.amount"
                                               [class.selected-icon]="selectedEntity?.item?.id === itemProcess.item.id"
                                               [itemName]="itemProcess.item.iconName"
                                               class="icon-grid-item">
                                </app-item-icon>
                            }
                        </div>
                    }
                    @if (showTable) {
                        <app-cooking-table [dataSource]="processorItems"/>
                    }

                }
            </mat-tab>
        }
    </mat-tab-group>

</app-list-detail-container>
