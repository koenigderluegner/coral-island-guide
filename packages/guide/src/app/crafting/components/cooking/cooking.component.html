<app-list-detail-container [(openDrawer)]="openDrawer">
    <app-base-item-card *ngIf="selectedEntity"
                        [item]="selectedEntity.item"
                        hideQualityGrid
                        listDetail
                        (addedToToDo)="registerToToDo(selectedEntity)"
                        [toDoCategory]="toDoCategory.COOKING_RECIPES"
                        [amount]="selectedEntity.amount">

        <ng-container *ngIf="selectedEntityConsumable">
            <div>Health: <span class="text-black">{{selectedEntityConsumable.healthDelta}}</span></div>
            <div [class.mb-3]="selectedEntityConsumable.buff === 'None'">Energy: <span
                    class="text-black">{{selectedEntityConsumable.staminaDelta}}</span></div>
            <div *ngIf="selectedEntityConsumable.buff !== 'None'" class="mb-3">Buff:
                <span class="text-black">
                  {{selectedEntityConsumable.buff | addSpacesToPascalCase}},
                  Level {{selectedEntityConsumable.level}} for {{selectedEntityConsumable.duration}} seconds
                </span>
            </div>
        </ng-container>

        <div *ngIf="selectedEntity.craftingUnlock" class="mb-3">
            Unlocked: <span
                class="text-black">Level {{selectedEntity.craftingUnlock.masteryLevel}}
            in {{selectedEntity.craftingUnlock.masteryType}}</span>
        </div>

        <app-item-list [itemList]="selectedEntity | cookingRecipeIngredients" class="mb-3"></app-item-list>
        <ng-container *ngIf="selectedEntity.eitherOrIngredients.length">
            <span class="text-black"> Either of the following</span>

            <ng-container *ngFor="let ingredients of selectedEntity.eitherOrIngredients; let last = last">
                <app-item-list [itemList]="ingredients" class="mb-3"></app-item-list>
                <hr *ngIf="!last" class="my-5"/>
            </ng-container>

        </ng-container>
        <ng-container *ngIf="selectedEntity.additionsToGenerics">
            <span class="text-black"> The following counting as</span>

            <div class="mb-3" *ngFor="let itemListItem of (selectedEntity.additionsToGenerics | keyvalue)">
                <ng-container *ngFor="let item of (itemListItem.value | castToMinimalItemArray)">
                    <div class="flex justify-between py-1">

                        <div class="flex gap-x-3 items-center" *ngIf="item">
                            <app-item-icon class="w-10" [itemName]="item.iconName"></app-item-icon>
                            <span>{{item.displayName}}</span>
                        </div>


                        <div class="flex items-center">as {{itemListItem.key}}</div>

                    </div>
                    <hr>
                </ng-container>
            </div>

        </ng-container>
    </app-base-item-card>


    <mat-tab-group class="px-2 xl:px-[50px] w-full" mat-stretch-tabs="false" (selectedTabChange)="updateUrl($event)"
                   [selectedIndex]="selectedTabIndex">
        <mat-tab *ngFor="let utensilName of utensilNames"
                 [label]="cookingUtensilMapping[utensilName.toLowerCase()] ? cookingUtensilMapping[utensilName.toLowerCase()].displayName : utensilName | spacesToPascalCase | titlecase">
            <app-data-filter [(showTable)]="showTable"/>
            <ng-container *ngIf="(filteredData$(utensilName) | async) as processorItems">
                <div *ngIf="!showTable" class="grid gap-4 icon-grid">

                    <app-item-icon (click)="showDetails(itemProcess)"
                                   *ngFor="let itemProcess of processorItems"
                                   [amount]="itemProcess.amount"
                                   [class.selected-icon]="selectedEntity?.item?.id === itemProcess.item.id"
                                   [itemName]="itemProcess.item.iconName"
                                   class="icon-grid-item">
                    </app-item-icon>
                </div>
                <app-cooking-table *ngIf="showTable" [dataSource]="processorItems"/>
            </ng-container>
        </mat-tab>
    </mat-tab-group>

</app-list-detail-container>
