<app-card class="text-lg font-semibold relative" style="">
    <div cardActions class="card-actions">
        @if (databaseItem(); as dbItem) {
            @if (isFetching()) {
                <mat-spinner diameter="30"/>
            }

            <app-to-do-toggle [item]="dbItem.item" [context]="context()" [amount]="amount()" [quality]="quality()"/>
        }
        <button (click)="listDetails.close()" matTooltip="Close">
            <app-ui-icon [uiIcon]="uiIcon.CROSS" class="!w-8 !h-8 hover:text-black focus-visible:text-black"/>
        </button>
    </div>
    @if (databaseItem(); as dbItem) {
        <app-item-icon [amount]="amount()" cardIcon itemName="{{dbItem.item.iconName}}"/>
        <div class="flex justify-between items-center">
            <div class="flex flex-col">
                <div class="text-black text-2xl">{{ dbItem.item.displayName }}</div>

                <span class="text-accent text-2xl">   {{ dbItem.item.displayKey | addSpacesToPascalCase }}</span>

            </div>

            <span matTooltip="Open in database" matTooltipPosition="before">
            <a [routerLink]="[ '/database', dbItem.item.id]">
                  <app-ui-icon [uiIcon]="uiIcon.DATABASE" class="focus-visible:!text-black hover:!text-black "/>
            </a>
        </span>

        </div>
        <hr class="my-5"/>
        <span class="text-lg mb-6">{{ dbItem.item.description }}</span>

        <ng-container *ngTemplateOutlet="databaseItemDetails() ?? null; context: {$implicit: dbItem}"/>

        @if (((dbItem.item.qualities) | keyvalue).length && !hideQualityGrid()) {
            <app-quality-grid
                    [item]="dbItem.item"
                    class="mt-6"
                    includePrices/>
        } @else {

            <div class="flex">
                Sells for:
                <app-money [amount]="dbItem.item.sellPrice" class="ml-2 text-black"/>
            </div>


        }
    } @else {
        @if (isFetching()) {
            <mat-spinner class="mx-auto"/>
        }
    }
</app-card>

