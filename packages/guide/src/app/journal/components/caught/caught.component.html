<app-list-detail-container [(openDrawer)]="openDrawer" [removePlaceholder]="showTable">
    @if (selectedEntity) {
        <app-caught-details [critter]="selectedEntity" listDetail/>
    }

    <mat-tab-group (selectedTabChange)="updateUrl($event); resetLocationFilter()" [selectedIndex]="selectedTabIndex()"
                   class=" px-2 xl:px-[50px] w-full"
                   mat-stretch-tabs="false">
        @for (tab of tabs; track tab) {
            <mat-tab [label]="tab.title">
                @if ((tab.data |async); as syncedData) {

                    <app-data-filter [(showTable)]="showTable"
                                     [parentFormGroup]="formControl"
                                     [locations]="getLocations(syncedData)"/>
                    @if (!showTable) {

                        <div class="grid gap-4 icon-grid">
                            @for (entry of syncedData; track entry) {
                                <app-item-icon [itemName]="entry.item.iconName"
                                               (click)="showDetails(entry)"
                                               [class.selected-icon]="selectedEntity?.item?.id === entry.item.id"
                                               class="icon-grid-item"
                                />
                            }
                        </div>

                    }
                    @if (showTable) {

                        <app-caught-table [dataSource]="syncedData"></app-caught-table>

                    }

                }
            </mat-tab>
        }
    </mat-tab-group>
</app-list-detail-container>
